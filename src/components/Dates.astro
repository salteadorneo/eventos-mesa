---
interface Props {
    start: Date;
    end?: Date;
    startTime?: string;
    endTime?: string;
}

const { start, end, startTime, endTime } = Astro.props;

const isSameMonth = start.getMonth() === (end?.getMonth() ?? start.getMonth());
const isSameYear =
    start.getFullYear() === (end?.getFullYear() ?? start.getFullYear());
const isSameDay = start.getDate() === (end?.getDate() ?? start.getDate());
---

{
    !isSameDay && isSameMonth && isSameYear ? (
        <>
            <time datetime={start.toISOString()}>
                {start.toLocaleDateString("es-ES", {
                    day: "numeric",
                })}
            </time>{" "}
            al{" "}
            <time datetime={end?.toISOString()}>
                {end?.toLocaleDateString("es-ES", {
                    day: "numeric",
                })}
            </time>{" "}
            de{" "}
            {start.toLocaleDateString("es-ES", {
                month: "long",
                year: "numeric",
            })}
        </>
    ) : isSameDay && isSameMonth && isSameYear ? (
        <>
            <time datetime={start.toISOString()}>
                {start.toLocaleDateString("es-ES", {
                    day: "numeric",
                })}
            </time>{" "}
            de{" "}
            {start.toLocaleDateString("es-ES", {
                month: "long",
                year: "numeric",
            })}
        </>
    ) : isSameYear ? (
        <>
            <time datetime={start.toISOString()}>
                {start.toLocaleDateString("es-ES", {
                    day: "numeric",
                    month: "long",
                })}
            </time>
            {end && (
                <>
                    {" "}
                    -{" "}
                    <time datetime={end.toISOString()}>
                        {end.toLocaleDateString("es-ES", {
                            day: "numeric",
                            month: "long",
                        })}
                    </time>
                </>
            )}{" "}
            de {start.getFullYear()}
        </>
    ) : (
        <>
            <time datetime={start.toISOString()}>
                {start.toLocaleDateString("es-ES", {
                    day: "numeric",
                    month: "long",
                    year: "numeric",
                })}
            </time>
            {end && (
                <>
                    {" "}
                    -{" "}
                    <time datetime={end.toISOString()}>
                        {end.toLocaleDateString("es-ES", {
                            day: "numeric",
                            month: "long",
                            year: "numeric",
                        })}
                    </time>
                </>
            )}
        </>
    )
}{
    startTime || endTime ? (
        endTime ? (
            <>
                de {startTime} a {endTime}
            </>
        ) : startTime ? (
            <>a las {startTime}</>
        ) : null
    ) : null
}
