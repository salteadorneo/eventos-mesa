---
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import Title from "@/components/Title.astro";
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Nuevo evento" description="Envía un nuevo evento de juegos de mesa.">
    <Header />
    <main class="flex-1">
        <Title title="Nuevo evento" />
        <section class="grid md:grid-cols-2 gap-8 w-full max-w-6xl mx-auto p-4">
            <div class="space-y-2">
                <p>
                    Puedes enviar un evento que no esté listado en la página o
                    dar más datos sobre alguno publicado. También si es
                    necesario corregir algo.
                </p>
                <p>
                    Por favor, asegúrate de que el evento sea relevante y cumpla
                    con las normas de la comunidad. Los eventos enviados serán
                    revisados antes de ser publicados.
                </p>
            </div>
            <form
                class="space-y-4 flex flex-col"
                method="POST"
                accept-charset="UTF-8"
                id="form"
            >
                <input
                    name="event_name"
                    placeholder="Nombre del evento"
                    class="border p-2"
                    required
                />
                <div class="grid sm:grid-cols-2 gap-2">
                    <label>
                        Fecha inicio<br />
                        <input
                            name="event_start_date"
                            type="date"
                            class="border p-2 w-full"
                            required
                        />
                    </label>
                    <label>
                        Fecha fin (opcional)<br />
                        <input
                            name="event_end_date"
                            type="date"
                            class="border p-2 w-full"
                        />
                    </label>
                </div>
                <input
                    name="event_location"
                    placeholder="Ubicación del evento"
                    class="border p-2"
                    required
                />
                <textarea
                    name="event_description"
                    placeholder="Descripción del evento"
                    class="border p-2"
                    rows="8"
                    required></textarea>
                <input
                    type="email"
                    name="email"
                    placeholder="Email (opcional)"
                    class="border p-2"
                />
                <input
                    type="hidden"
                    name="_gotcha"
                    style="display:none !important"
                />
                <button class="bg-primary text-white p-2">Enviar</button>
            </form>
        </section>

        <script is:inline>
            document
                .getElementById("form")
                .addEventListener("submit", formSubmit);

            function formSubmit(e) {
                e.preventDefault();
                const formData = new FormData(e.target);

                fetch("https://getform.io/f/aejereqb", {
                    method: "POST",
                    body: formData,
                    headers: {
                        Accept: "application/json",
                    },
                })
                    .then((response) => console.log(response))
                    .catch((error) => console.log(error));
            }
        </script>
    </main>
    <Footer />
</Layout>
